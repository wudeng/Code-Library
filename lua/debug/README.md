# Lua Debug

使用 debug 来跟踪函数执行过程：

* sethook 会追踪本身的调用，所以我们用 up 返回的钩子函数在 sethook 返回以后来设置真正的钩子。
* 我们设置的钩子函数或扩散到外面去，所以需要在退出当前函数之前去掉钩子。
* 为了防止深度扩散，我们使用 level 来控制跟踪的深度，超出深度不打印信息。

